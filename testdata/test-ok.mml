; ------------------------------------------------------------
; test_ok.mml - 全コマンドを一通り通すための正常系テスト
; ------------------------------------------------------------

; --- D: 初期設定 / 基本音符 / 長さまわり ----------------------------

D   R                ; L 音長休符 (=00h) 確認用
D   T24,3 O4 L4 L+8 Q8
D   R                ; O/L/L+/Q の後の休符

D   V8 W8 P2         ; volume / noise / mode
D   S1,4,-1,0,0 M8,1,2,1 N U%3 W+1 I123
D   S0,4,-1,0,0 Q0 (2 )3 W8 P1 P2 P3 S1,4,-1,0,0 U-1 M%8 W1

D   L4 CDEFGAB R4    ; L 音長 + 音符/休符
D   L8 C8. D8. E8.. F16^16 G%24 A%48.&A%48 B1

; L / L+ の % 直指定
D   L4
D   L%24 L%+96 C C C

; --- E: オクターブ / 転調 / 変化記号 -------------------------------

E   O4 C D E F G A B
E   >1 C D E          ; O5 相当
E   <2 C D E          ; O3 相当

E   _+2 C D E F G A B ; 転調 +2 半音
E   _-4 C D E F G A B ; 転調 -4 半音

E   C+ D- F# G- A# B-

; --- F: ボリューム / ノイズ系 --------------------------------------

F   V8 C D E F
F   (2 C D E F        ; volume +2
F   )1 C D E F        ; volume -1 (明示指定)

F   P1 C D E F        ; tone
F   P2 C D E F        ; noise
F   P3 C D E F        ; tone+noise

F   W8  C D E F
F   W+4 C D E F
F   W-3 C D E F

; --- D: ビブラート / デチューン / ゲートタイム ---------------------

D   M10,5,3,1 C D E F
D   M%+4 C D E F      ; 第4パラメータのみ指定

D   N C D E F         ; vibrato on/off toggle

D   Q64 C D E F       ; gate time

D   U%+3 C D E F      ; detune 絶対指定
D   U+2  C D E F      ; 相対 +2
D   U-4  C D E F      ; 相対 -4

; --- E: ソフトウェアエンベロープ / テンポ / I -----------------------

E   S4,10,-2,0,0 C D E F   ; 任意のエンベロープ
E   S0,10,0,0,0   R4       ; OFF (n1=0 で後続パラメータ出力抑制)

E   T24,3 C D E F          ; tempo

E   I123 C D E F           ; I コマンド (work write)

; --- F: ループ / ネスト / : / コメント ------------------------------

; 1 重ループ（: なし）
F   [ C D E ]4

; : ありのループ
F   [ L4 C D : E F ]3

; 2 重ネスト
F   [ C [ D E ]2 F ]3

; 4 重ネスト（最大ネスト深度）
F   [ C [ D [ E [ F ]2 ]2 ]2 ]2

; コメント行 / 行末コメント
F   ; これはコメント行で無視される
F   C D E F ; 行末コメントテスト

; --- D/E: J / X / 追加のオクターブ・転調テスト ---------------------

; 曲末リピート J
D   C D E F G A B J

; X コマンド (チャンネル内)
E   C D E F X  C D E F  ; X 以降は無視される想定

; 転調 / オクターブ相対 / デチューン (D 版)
D   C4. D4^8 E%24 F4& G+4 A-4 B#4 R4
D   V10 (2 )1 C4

D   _+2 C4 D4 E4
D   >1 C4 <1 C4
D   U+2 C4

; --- D: ループ 2 段ネスト + ループ内 L 再設定 ---------------------

D   L4
D   [ L8 C8 [ L16 E16 ]3 D4 ]2

; --- 1000 "D: オリジナルコンパイラ BASIC書式 ---------------------

10 "D V15 CDEFGAB
100 "X
110 "E  C1
12345 "X
65530 "D  C1^1
